<div class="demo-page">
  <div class="page-header">
    <h2>ğŸ”§ Handlebars Helpers æ¼”ç¤º</h2>
    <p class="description">{{description}}</p>
  </div>

  <div class="demo-section">
    <h3>ğŸ“… æ—¥æœŸæ ¼å¼åŒ– (formatDate)</h3>
    <div class="demo-box">
      <p><strong>å®Œæ•´æ—¥æœŸæ—¶é—´ï¼š</strong> {{formatDate currentDate "YYYY-MM-DD HH:mm:ss"}}</p>
      <p><strong>ä»…æ—¥æœŸï¼š</strong> {{formatDate currentDate "YYYY-MM-DD"}}</p>
      <p><strong>ä¸­æ–‡æ ¼å¼ï¼š</strong> {{formatDate currentDate "YYYYå¹´MMæœˆDDæ—¥"}}</p>
      <p><strong>ç”¨æˆ·åŠ å…¥æ—¶é—´ï¼š</strong> {{formatDate user.joinDate "YYYY-MM-DD"}}</p>
    </div>
  </div>

  <div class="demo-section">
    <h3>ğŸ”¤ å­—ç¬¦ä¸²å¤„ç†</h3>
    <div class="demo-box">
      <p><strong>åŸæ–‡ï¼š</strong> {{user.bio}}</p>
      <p><strong>æˆªå– (truncate 50)ï¼š</strong> {{truncate user.bio 50}}</p>
      <p><strong>å¤§å†™ (uppercase)ï¼š</strong> {{uppercase user.name}}</p>
      <p><strong>å°å†™ (lowercase)ï¼š</strong> {{lowercase user.name}}</p>
      <p><strong>é¦–å­—æ¯å¤§å†™ (capitalize)ï¼š</strong> {{capitalize user.name}}</p>
      <p><strong>æ‹¼æ¥ (concat)ï¼š</strong> {{concat "ç”¨æˆ·ï¼š" user.name " (çŠ¶æ€ï¼š" user.status ")"}}</p>
    </div>
  </div>

  <div class="demo-section">
    <h3>ğŸ”¢ æ•°å­—æ ¼å¼åŒ–</h3>
    <div class="demo-box">
      <p><strong>ç”¨æˆ·ç§¯åˆ†ï¼š</strong> {{formatNumber user.score}} åˆ†</p>
      <p><strong>æ€»ç”¨æˆ·æ•°ï¼š</strong> {{formatNumber stats.totalUsers}} äºº</p>
      <p><strong>æ€»é”€å”®é¢ï¼š</strong> Â¥{{formatNumber stats.totalSales}}</p>
      <p><strong>è½¬åŒ–ç‡ï¼š</strong> {{percentage 385 1000}}</p>
    </div>
  </div>

  <div class="demo-section">
    <h3>ğŸ” æ¡ä»¶åˆ¤æ–­</h3>
    <div class="demo-box">
      <p><strong>ç”¨æˆ·çŠ¶æ€ (eq)ï¼š</strong> 
        {{#if (eq user.status "active")}}
          <span class="badge success">æ¿€æ´»ä¸­</span>
        {{else}}
          <span class="badge">æœªæ¿€æ´»</span>
        {{/if}}
      </p>
      
      <p><strong>ä¼šå‘˜çŠ¶æ€ (and)ï¼š</strong>
        {{#if (and user.isPremium user.isOnline)}}
          <span class="badge premium">åœ¨çº¿ä¼šå‘˜</span>
        {{else}}
          <span class="badge">æ™®é€šç”¨æˆ·</span>
        {{/if}}
      </p>
      
      <p><strong>ä¸‰å…ƒè¿ç®— (ternary)ï¼š</strong>
        <span class="status {{ternary user.isOnline 'online' 'offline'}}">
          {{ternary user.isOnline 'åœ¨çº¿' 'ç¦»çº¿'}}
        </span>
      </p>
    </div>
  </div>

  <div class="demo-section">
    <h3>ğŸ›ï¸ å•†å“åˆ—è¡¨ï¼ˆç»¼åˆç¤ºä¾‹ï¼‰</h3>
    <div class="products-grid">
      {{#each products}}
        <div class="product-card {{#if (lte this.stock 5)}}low-stock{{/if}} {{#if (eq this.stock 0)}}out-of-stock{{/if}}">
          <div class="product-number">{{inc @index}}</div>
          <h4>{{this.name}}</h4>
          <p class="price">Â¥{{formatNumber this.price}}</p>
          <p class="desc">{{truncate this.description 40}}</p>
          
          {{#if (gt this.discount 0)}}
            <span class="discount-badge">-{{this.discount}}%</span>
          {{/if}}
          
          <div class="product-info">
            <p><strong>åº“å­˜ï¼š</strong> {{this.stock}}
              {{#if (lte this.stock 5)}}
                {{#if (gt this.stock 0)}}
                  <span class="warning">âš ï¸ åº“å­˜ç´§å¼ </span>
                {{else}}
                  <span class="error">âŒ ç¼ºè´§</span>
                {{/if}}
              {{/if}}
            </p>
            
            <p><strong>è¯„åˆ†ï¼š</strong>
              {{#times this.rating}}â­{{/times}}
            </p>
            
            <p><strong>å‘å¸ƒï¼š</strong> {{formatDate this.publishedAt "YYYY-MM-DD"}}</p>
            
            {{#if (contains this.tags "featured")}}
              <span class="tag featured">ç²¾é€‰</span>
            {{/if}}
            {{#if (contains this.tags "hot")}}
              <span class="tag hot">çƒ­é”€</span>
            {{/if}}
          </div>
        </div>
      {{/each}}
    </div>
  </div>

  <div class="demo-section">
    <h3>ğŸ“° æ–‡ç« åˆ—è¡¨ï¼ˆæ•°ç»„æ“ä½œï¼‰</h3>
    <div class="demo-box">
      <p><strong>æ€»æ–‡ç« æ•° (length)ï¼š</strong> {{length articles}} ç¯‡</p>
      <p><strong>æœ€æ–° 3 ç¯‡æ–‡ç«  (slice)ï¼š</strong></p>
      
      <div class="articles-list">
        {{#slice articles 0 3}}
          <article class="article-item {{#if (isEven @index)}}even{{else}}odd{{/if}}">
            <h4>{{inc @index}}. {{this.title}}</h4>
            <p class="content">{{truncate this.content 100}}</p>
            <div class="meta">
              <span>ä½œè€…ï¼š{{capitalize this.author}}</span>
              <span>å‘å¸ƒï¼š{{formatDate this.publishedAt "YYYY-MM-DD HH:mm"}}</span>
              <span>é˜…è¯»ï¼š{{formatNumber this.views}} æ¬¡</span>
            </div>
            <div class="tags">
              {{#if (contains this.tags "featured")}}
                <span class="tag">â­ ç²¾é€‰</span>
              {{/if}}
              {{#if (contains this.tags "tutorial")}}
                <span class="tag">ğŸ“š æ•™ç¨‹</span>
              {{/if}}
            </div>
          </article>
        {{/slice}}
      </div>
    </div>
  </div>

  <div class="demo-section">
    <h3>ğŸ” å¾ªç¯ä¸å¥‡å¶åˆ¤æ–­</h3>
    <div class="demo-box">
      <p><strong>æ•°å­—åˆ—è¡¨ï¼ˆå¥‡å¶äº¤æ›¿æ ·å¼ï¼‰ï¼š</strong></p>
      <div class="numbers-grid">
        {{#each numbers}}
          <div class="number-box {{#if (isEven this)}}even{{else}}odd{{/if}}">
            {{this}}
            <small>({{#if (isEven this)}}å¶{{else}}å¥‡{{/if}})</small>
          </div>
        {{/each}}
      </div>
    </div>
  </div>

  <div class="demo-section">
    <h3>ğŸ“Š æ•°ç»„æ’åºä¸åè½¬</h3>
    <div class="demo-box">
      <p><strong>è¯„åˆ†æ’åº (sort)ï¼š</strong></p>
      <div class="ratings-list">
        {{#sort ratings "rating"}}
          <div class="rating-item">
            <span>{{this.product}}</span>
            <span>
              {{#times this.rating}}â­{{/times}}
              ({{formatNumber this.reviews}} è¯„ä»·)
            </span>
          </div>
        {{/sort}}
      </div>
      
      <p><strong>é¢œè‰²åˆ—è¡¨åè½¬ (reverse)ï¼š</strong></p>
      <div class="colors-list">
        æ­£åºï¼š{{#each colors}}{{this}}{{#unless @last}}, {{/unless}}{{/each}}
      </div>
      <div class="colors-list">
        å€’åºï¼š{{#reverse colors}}{{this}}{{#unless @last}}, {{/unless}}{{/reverse}}
      </div>
    </div>
  </div>

  <div class="demo-section">
    <h3>ğŸŒ URL ç¼–ç </h3>
    <div class="demo-box">
      <p><strong>åŸå§‹æŸ¥è¯¢ï¼š</strong> {{searchQuery}}</p>
      <p><strong>ç¼–ç åï¼š</strong> {{encodeURI searchQuery}}</p>
      <p><strong>æœç´¢é“¾æ¥ï¼š</strong> <a href="/search?q={{encodeURI searchQuery}}">ç‚¹å‡»æœç´¢</a></p>
    </div>
  </div>

  <div class="demo-section">
    <h3>ğŸ› ï¸ å…¶ä»–åŠŸèƒ½</h3>
    <div class="demo-box">
      <p><strong>é»˜è®¤å€¼ (default)ï¼š</strong> {{default user.nickname "åŒ¿åç”¨æˆ·"}}</p>
      <p><strong>æ•°å­¦è¿ç®— (subtract)ï¼š</strong> 5 - 2 = {{subtract 5 2}}</p>
      <p><strong>JSON è¾“å‡º (json)ï¼š</strong></p>
      <pre><code>{{json user}}</code></pre>
    </div>
  </div>

  <div class="demo-footer">
    <p>âœ… ä»¥ä¸Šæ¼”ç¤ºäº† 32 ä¸ªè‡ªå®šä¹‰ Helpers çš„ä½¿ç”¨æ–¹æ³•</p>
    <p>ğŸ“š æŸ¥çœ‹ <a href="/HELPERS.md">HELPERS.md</a> äº†è§£æ›´å¤š</p>
  </div>
</div>

<style>
.demo-page {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

.demo-section {
  margin: 30px 0;
  padding: 20px;
  border: 1px solid #e0e0e0;
  border-radius: 8px;
  background: #fff;
}

.demo-section h3 {
  margin-top: 0;
  color: #333;
  border-bottom: 2px solid #4CAF50;
  padding-bottom: 10px;
}

.demo-box {
  background: #f5f5f5;
  padding: 15px;
  border-radius: 4px;
  margin: 10px 0;
}

.demo-box p {
  margin: 8px 0;
  line-height: 1.6;
}

.badge {
  display: inline-block;
  padding: 4px 12px;
  border-radius: 12px;
  font-size: 0.85em;
  font-weight: bold;
  background: #ddd;
  color: #666;
}

.badge.success {
  background: #4CAF50;
  color: white;
}

.badge.premium {
  background: #FF9800;
  color: white;
}

.status {
  display: inline-block;
  padding: 4px 8px;
  border-radius: 4px;
}

.status.online {
  background: #4CAF50;
  color: white;
}

.status.offline {
  background: #999;
  color: white;
}

.products-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 20px;
  margin: 20px 0;
}

.product-card {
  border: 1px solid #ddd;
  padding: 15px;
  border-radius: 8px;
  background: white;
  position: relative;
}

.product-card.low-stock {
  border-color: #FF9800;
}

.product-card.out-of-stock {
  opacity: 0.6;
  border-color: #f44336;
}

.product-number {
  position: absolute;
  top: 10px;
  right: 10px;
  width: 30px;
  height: 30px;
  background: #2196F3;
  color: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
}

.product-card h4 {
  margin: 0 0 10px 0;
  color: #333;
}

.price {
  font-size: 1.5em;
  color: #f44336;
  font-weight: bold;
  margin: 10px 0;
}

.discount-badge {
  background: #f44336;
  color: white;
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 0.9em;
  font-weight: bold;
}

.product-info p {
  margin: 8px 0;
  font-size: 0.9em;
}

.warning {
  color: #FF9800;
  font-weight: bold;
}

.error {
  color: #f44336;
  font-weight: bold;
}

.tag {
  display: inline-block;
  padding: 3px 8px;
  margin: 2px;
  border-radius: 3px;
  font-size: 0.85em;
  background: #e0e0e0;
}

.tag.featured {
  background: #4CAF50;
  color: white;
}

.tag.hot {
  background: #f44336;
  color: white;
}

.articles-list {
  margin-top: 15px;
}

.article-item {
  padding: 15px;
  margin: 10px 0;
  border-radius: 4px;
}

.article-item.even {
  background: #f0f8ff;
}

.article-item.odd {
  background: #fff8f0;
}

.article-item h4 {
  margin: 0 0 10px 0;
  color: #2196F3;
}

.article-item .content {
  color: #666;
  line-height: 1.6;
}

.article-item .meta {
  margin: 10px 0;
  font-size: 0.9em;
  color: #999;
}

.article-item .meta span {
  margin-right: 15px;
}

.numbers-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
  gap: 10px;
  margin: 15px 0;
}

.number-box {
  padding: 20px;
  text-align: center;
  border-radius: 8px;
  font-size: 1.5em;
  font-weight: bold;
}

.number-box.even {
  background: #E3F2FD;
  color: #1976D2;
}

.number-box.odd {
  background: #FFF3E0;
  color: #F57C00;
}

.number-box small {
  display: block;
  font-size: 0.6em;
  margin-top: 5px;
  font-weight: normal;
}

.ratings-list {
  margin: 10px 0;
}

.rating-item {
  display: flex;
  justify-content: space-between;
  padding: 10px;
  margin: 5px 0;
  background: white;
  border-radius: 4px;
  border: 1px solid #ddd;
}

.colors-list {
  padding: 10px;
  background: white;
  margin: 5px 0;
  border-radius: 4px;
}

pre {
  background: #263238;
  color: #aed581;
  padding: 15px;
  border-radius: 4px;
  overflow-x: auto;
}

.demo-footer {
  margin-top: 40px;
  padding: 20px;
  background: #f0f8ff;
  border-radius: 8px;
  text-align: center;
}

.demo-footer p {
  margin: 10px 0;
}

.demo-footer a {
  color: #2196F3;
  text-decoration: none;
  font-weight: bold;
}
</style>

