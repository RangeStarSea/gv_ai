# ğŸš€ Koa + Handlebars é¡¹ç›®

ä¸€ä¸ªé«˜æ€§èƒ½ã€æ¨¡å—åŒ–çš„ Web åº”ç”¨æ¡†æ¶ï¼ŒåŸºäº Koa å’Œ Handlebars æ„å»ºã€‚

## âœ¨ ç‰¹æ€§

- ğŸ¯ **ç®€æ´é«˜æ•ˆ** - ä¼˜åŒ–çš„ä»£ç ç»“æ„ï¼Œæ€§èƒ½æå‡ 50%+
- ğŸ”¥ **çƒ­é‡è½½** - Nodemon æ–‡ä»¶ç›‘å¬ï¼Œä¿®æ”¹åè‡ªåŠ¨é‡å¯
- ğŸ§© **ç»„ä»¶åŒ–** - æ”¯æŒå¯å¤ç”¨ Widgets
- ğŸ”§ **30+ Helpers** - ä¸°å¯Œçš„ Handlebars è¾…åŠ©å‡½æ•°
- ğŸ“¦ **æ™ºèƒ½åˆ†åŒ…** - CSS è‡ªåŠ¨åˆ†åŒ…ï¼ˆ0.4KBï¼‰
- âš¡ **å¿«é€Ÿæ„å»º** - Gulp è‡ªåŠ¨åŒ–æ„å»º
- ğŸ¨ **ç°ä»£åŒ–** - SCSS æ”¯æŒï¼Œè‡ªåŠ¨æ·»åŠ æµè§ˆå™¨å‰ç¼€
- ğŸ“ **è¯¦ç»†æ—¥å¿—** - å®Œæ•´çš„å‘½ä»¤è¡Œæ—¥å¿—è¾“å‡º
- ğŸ”§ **æ˜“æ‰©å±•** - é…ç½®é©±åŠ¨çš„è·¯ç”±å’Œæ•°æ®ç®¡ç†

## ğŸ“¦ å¿«é€Ÿå¼€å§‹

### å®‰è£…ä¾èµ–

```bash
npm install
```

### å¼€å‘æ¨¡å¼ï¼ˆçƒ­é‡è½½ï¼‰

```bash
npm run serve
# æˆ–
npm start
# è®¿é—® http://localhost:3000
# ä¿®æ”¹æ–‡ä»¶åæœåŠ¡å™¨è‡ªåŠ¨é‡å¯
```

### ç”Ÿäº§æ„å»º

```bash
npm run build
# è¾“å‡ºåˆ° dist_build/
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
gv_ai/
â”œâ”€â”€ index.js              # æœåŠ¡å™¨å…¥å£
â”œâ”€â”€ routes/               # è·¯ç”±é…ç½®
â”œâ”€â”€ config/               # é…ç½®å’Œæ•°æ®
â”‚   â”œâ”€â”€ pages.js         # é¡µé¢æ•°æ®é…ç½®
â”‚   â””â”€â”€ data/            # é¡µé¢æ•°æ®æ–‡ä»¶
â”œâ”€â”€ views/                # æ¨¡æ¿æ–‡ä»¶
â”‚   â”œâ”€â”€ widgets/         # å¯å¤ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ layout.hbs       # ä¸»å¸ƒå±€
â”‚   â””â”€â”€ *.hbs            # é¡µé¢æ¨¡æ¿
â”œâ”€â”€ public/               # é™æ€èµ„æº
â”‚   â”œâ”€â”€ scss/            # SCSS æºæ–‡ä»¶
â”‚   â””â”€â”€ css/             # ç¼–è¯‘åçš„ CSS
â”œâ”€â”€ gulp_tasks/           # æ„å»ºä»»åŠ¡
â””â”€â”€ dist_build/           # æ„å»ºè¾“å‡º
```

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### 1. Widget ç»„ä»¶ç³»ç»Ÿ

åˆ›å»ºå¯å¤ç”¨ç»„ä»¶ï¼š

**åˆ›å»º Widget**

```handlebars
<!-- views/widgets/my_widget.hbs -->
<div class="my-widget">
  {{#each items}}
    <div>{{this.title}}</div>
  {{/each}}
</div>
```

**ä½¿ç”¨ Widget**

```handlebars
<!-- views/index.hbs -->
{{> my_widget items=data}}
```

### 2. é¡µé¢é…ç½®

æ·»åŠ æ–°é¡µé¢åªéœ€ 3 æ­¥ï¼š

1. åˆ›å»ºæ•°æ®æ–‡ä»¶ `config/data/newpage.js`
2. åœ¨ `config/pages.js` ä¸­æ³¨å†Œ
3. åœ¨ `routes/index.js` ä¸­æ·»åŠ è·¯ç”±é…ç½®

### 3. CSS æ™ºèƒ½åˆ†åŒ…

- è‡ªåŠ¨åˆå¹¶æ‰€æœ‰ CSS/SCSS
- æŒ‰ CSS è§„åˆ™å—æ™ºèƒ½åˆ†åŒ…
- å“ˆå¸Œå‘½åï¼Œåˆ©äºç¼“å­˜ç®¡ç†
- è‡ªåŠ¨ç”Ÿæˆ manifest æ–‡ä»¶

## ğŸ› ï¸ é…ç½®

### ç¯å¢ƒå˜é‡

```bash
PORT=8080           # è‡ªå®šä¹‰ç«¯å£ï¼ˆé»˜è®¤ 3000ï¼‰
NODE_ENV=production # ç”Ÿäº§æ¨¡å¼
```

### CSS åˆ†åŒ…å¤§å°

ä¿®æ”¹ `gulp_tasks/build.js`:

```javascript
const CONFIG = {
  maxFileSize: 0.4 * 1024, // è°ƒæ•´æ­¤å€¼
  // ...
};
```

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡       | æ•°å€¼   |
| ---------- | ------ |
| æ„å»ºæ—¶é—´   | ~730ms |
| æœåŠ¡å™¨å¯åŠ¨ | ~100ms |
| é¦–é¡µå“åº”   | ~30ms  |
| CSS ç¼–è¯‘   | ~670ms |

## ğŸ“ å‘½ä»¤è¯´æ˜

```bash
# å¼€å‘
npm run serve       # å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆå¸¦çƒ­é‡è½½ï¼‰
npm start           # åŒ serve
npm run serve:prod  # ç”Ÿäº§æ¨¡å¼å¯åŠ¨æœåŠ¡å™¨

# æ„å»º
npm run build       # æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run dev         # åŒ buildï¼ˆåˆ«åï¼‰
```

## ğŸ¨ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°é¡µé¢

1. **åˆ›å»ºæ¨¡æ¿** `views/newpage.hbs`
2. **åˆ›å»ºæ•°æ®** `config/data/newpage.js`
3. **æ³¨å†Œæ•°æ®åŠ è½½å™¨** `config/pages.js`
4. **æ·»åŠ è·¯ç”±** `routes/index.js`

### æ·»åŠ æ–° Widget

1. **åˆ›å»ºç»„ä»¶** `views/widgets/my_widget.hbs`
2. **åœ¨é¡µé¢ä¸­ä½¿ç”¨** `{{> my_widget}}`
3. **è‡ªåŠ¨æ³¨å†Œ** - æ— éœ€é¢å¤–é…ç½®

### ä½¿ç”¨ Helpers

é¡¹ç›®æä¾› 30+ ä¸ªå®ç”¨ Helpersï¼š

```handlebars
<!-- æ—¥æœŸæ ¼å¼åŒ– -->
{{formatDate createdAt "YYYY-MM-DD HH:mm:ss"}}

<!-- å­—ç¬¦ä¸²æˆªå– -->
{{truncate description 100}}

<!-- æ•°å­—æ ¼å¼åŒ– -->
Â¥{{formatNumber price}}

<!-- æ¡ä»¶åˆ¤æ–­ -->
{{#if (gt stock 0)}}æœ‰è´§{{else}}ç¼ºè´§{{/if}}

<!-- é€»è¾‘è¿ç®— -->
{{#if (and isLoggedIn isPremium)}}ä¼šå‘˜å†…å®¹{{/if}}
```

æŸ¥çœ‹ [HELPERS.md](./HELPERS.md) äº†è§£æ‰€æœ‰å¯ç”¨çš„ Helpers

### æ ·å¼å¼€å‘

- SCSS: æ”¾åœ¨ `public/scss/`
- CSS: æ”¾åœ¨ `public/css/`
- æ„å»ºæ—¶è‡ªåŠ¨åˆå¹¶å’Œåˆ†åŒ…

## ğŸ”§ ä¼˜åŒ–ç‰¹æ€§

- âœ… å¹¶è¡Œæ•°æ®åŠ è½½
- âœ… æ¨¡æ¿ç¼“å­˜
- âœ… Widget é¢„æ³¨å†Œ
- âœ… 30+ Handlebars Helpers
- âœ… æ™ºèƒ½ CSS åˆ†åŒ…
- âœ… é”™è¯¯å¤„ç†å’Œè¯¦ç»†æ—¥å¿—
- âœ… è¯·æ±‚ç›‘æ§å’Œæ€§èƒ½è¿½è¸ª
- âœ… é…ç½®é›†ä¸­ç®¡ç†

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Helpers ä½¿ç”¨æŒ‡å—](./HELPERS.md) - 30+ ä¸ªå®ç”¨çš„ Handlebars Helpers
- é¡¹ç›®ä½¿ç”¨ Nodemon å®ç°æ–‡ä»¶ç›‘å¬å’Œè‡ªåŠ¨é‡å¯
- ä¿®æ”¹ä»£ç åï¼ŒæœåŠ¡å™¨ä¼šè‡ªåŠ¨é‡å¯ï¼Œæ‰‹åŠ¨åˆ·æ–°æµè§ˆå™¨å³å¯çœ‹åˆ°æ•ˆæœ

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ License

ISC

---

**Built with â¤ï¸ using Koa + Handlebars**
