:root {
  /**
  * 行高比例配置
  * 格式：字体大小 行高比例 行高值(像素)
  * 12px 1.666667 20
  * 14px 1.714286 24
  * 16px 1.75 28
  * 18px 1.777778 32
  * 20px 1.8 36
  */
  --12px--: 1.6667;
  --14px--: 1.7143;
  --16px--: 1.75;
  --18px--: 1.7778;
  --20px--: 1.8;
  --22px--: 1.8182;
  --24px--: 1.8333;
  --26px--: 1.8462;
  --28px--: 1.8571;
  --30px--: 1.8667;
  --32px--: 1.875;
  --34px--: 1.8824;
  --36px--: 1.8889;
  --38px--: 1.8947;
  --40px--: 1.9;
  --48px--: 1.3333;
}

/**
 * 字体样式 - 使用自定义属性 fontSize
 * 用法: <p fontSize="18px">文本内容</p>
 */
$font-sizes: (
  "12px": 1.6667,
  "14px": 1.7143,
  "16px": 1.75,
  "18px": 1.7778,
  "20px": 1.8,
  "22px": 1.8182,
  "24px": 1.8333,
  "26px": 1.8462,
  "28px": 1.8571,
  "30px": 1.8667,
  "32px": 1.875,
  "34px": 1.8824,
  "36px": 1.8889,
  "38px": 1.8947,
  "40px": 1.9,
  "48px": 1.3333,
);

@each $size, $line-height in $font-sizes {
  [fontSize="#{$size}"] {
    font-size: #{$size};
    line-height: #{$line-height};
    // 支持自定义颜色（通过 CSS 变量）
    // 用法: <p fontSize="18px" style="--font-color: #ff0000;">文本</p>
    color: var(--font-color, inherit);
  }
  
  [fontSize="#{$size}"] {
    // 1行
    [line="1"] {
      -webkit-line-clamp: 1;
      line-clamp: 1;
      max-height: #{($line-height)}em;
    }

    // 2行
    [line="2"] {
      -webkit-line-clamp: 2;
      line-clamp: 2;
      max-height: #{($line-height * 2)}em;
    }

    // 3行
    [line="3"] {
      -webkit-line-clamp: 3;
      line-clamp: 3;
      max-height: #{($line-height * 3)}em;
    }

    // 4行
    [line="4"] {
      -webkit-line-clamp: 4;
      line-clamp: 4;
      max-height: #{($line-height * 4)}em;
    }
  }
}

// 这个class为控制文本行数
.sis_ft {
  // 文本截断基础样式
  display: -webkit-box;
  -webkit-box-orient: vertical;
  overflow: hidden;
  text-overflow: ellipsis;
  word-break: break-word; // 在单词边界断行，避免单词中间断开
  overflow-wrap: break-word; // 支持长单词换行

  // 为每个字体大小和行数组合生成样式
  @each $size, $line-height in $font-sizes {
    &[fontSize="#{$size}"] {
      // 1行
      &[line="1"] {
        -webkit-line-clamp: 1;
        line-clamp: 1;
        max-height: #{$line-height}em;
      }

      // 2行
      &[line="2"] {
        -webkit-line-clamp: 2;
        line-clamp: 2;
        max-height: #{($line-height * 2)}em;
      }

      // 3行
      &[line="3"] {
        -webkit-line-clamp: 3;
        line-clamp: 3;
        max-height: #{($line-height * 3)}em;
      }
    }
  }
}

.col_border {
  border: 1px solid #b5b5b5;
}

/**
 * Flex Layout - 灵活的左右布局组件
 * 根据子元素数量自动调整布局
 */
.flex_layout {
  display: flex;
  flex-direction: row;
  flex-wrap: var(--wrap, wrap);
  align-items: var(--align, stretch); // 确保所有列等高
  gap: var(--gap, 20px);
  margin: var(--margin, 0px);

  // 如果设置了 equal，所有子元素等宽
  &[style*="--equal: true"] > *,
  &[style*="--equal: 'true'"] > * {
    flex: 1;
  }

  // 根据子元素数量自动调整布局
  // 1个子元素：100% 宽度
  > *:only-child {
    width: 100%;
  }

  // 2个子元素：各占 50%
  /**
   * :first-child → 选择第一个子元素。
   * :nth-last-child(2) → 从末尾数第二个子元素。
   *  ~ * 表示选择它后面的所有兄弟元素。
   *  只有当一个容器恰好有 2 个子元素时，这个选择器才成立。
   *  因为第一个子元素同时又是“倒数第二个”，这只可能在有 2 个孩子时成立。
   */
  > *:first-child:nth-last-child(2),
  > *:first-child:nth-last-child(2) ~ * {
    flex: 1;
    min-width: 0;
  }

  // 3个子元素：1:1:1 或 2:1:1（根据 equal 参数）
  > *:first-child:nth-last-child(3),
  > *:first-child:nth-last-child(3) ~ * {
    flex: 1;
    min-width: 0;
  }

  // 4个子元素：各占 25%
  > *:first-child:nth-last-child(4),
  > *:first-child:nth-last-child(4) ~ * {
    flex: 1;
    min-width: 0;
  }

  // 自定义布局：左右布局（第一个占更多，其他平均分配）
  &.left-right {
    > *:first-child {
      flex: 2;
      min-width: 0;
    }
    > *:not(:first-child) {
      flex: 1;
      min-width: 0;
    }
  }

  // 自定义布局：右左布局（最后一个占更多）
  &.right-left {
    > *:last-child {
      flex: 2;
      min-width: 0;
    }
    > *:not(:last-child) {
      flex: 1;
      min-width: 0;
    }
  }
  
  @for $idx from 1 through 10 {
    [flex_width="#{$idx}"] {
      flex: #{$idx} !important;
      min-width: 0;
    }
  }

  // 响应式：移动端自动换行
  @media (max-width: 768px) {
    flex-direction: column;

    > * {
      width: 100% !important;
      flex: none !important;
    }
  }
}

.wal {
  max-width: 17.6rem;
  width: 100%;
  margin: 0 auto;
  .custom_x {
    // border: 1px solid #000;
    width: 100%;
    display: flex;
    flex-wrap: wrap;
    position: relative;
    box-sizing: border-box;
    justify-content: flex-start;
    align-items: stretch; // 确保所有列等高
    margin: 0 calc(var(--space) / 2 * -1);

    .x_col {
      --col-pv: calc(100% / var(--col));
      max-width: var(--col-pv);
      flex: 0 0 var(--col-pv);
      padding: calc(var(--space) / 2);

      .col_item {
        padding: var(--padding);
        border-radius: var(--radius);
        background: var(--backgroundColor);
        border: var(--border);
        display: flex;
        flex-direction: column;
        // align-items: var(--align);
        height: -webkit-fill-available;
      }
    }
  }
}

// 图片悬浮放大
.img_hover:hover {
  .custom_img {
    img {
      transform: scale(1.05);
    }
  }
}
// 问题悬浮出现下横线
.txt_hover {
  --txt-color: #000000;
  @media screen and (min-width: 800px) {
    &:hover {
      span {
        background-size: 100% 100%;
        color: var(--txt-color);
      }
    }
  }
  span {
    background-image: linear-gradient(
      to bottom,
      transparent 95%,
      var(--txt-color) 0
    );
    background-repeat: no-repeat;
    background-size: 0 100%;
    text-decoration: none;
    -webkit-transition: background-size 0.36s cubic-bezier(0.32, 0.17, 0, 1);
    transition: background-size 0.36s cubic-bezier(0.32, 0.17, 0, 1);
  }
}

.custom_img {
  display: flex;
  align-items: center;
  width: var(--img-width);

  .img {
    overflow: hidden;
    position: relative;
    width: 100%;
    border-radius: var(--img-border-radius);
    padding-top: calc(var(--img-ratio) * 100%);

    /**
    * 使用 CSS 变量动态设置宽高比（y/x）
    * aspectRatio 值应该是 高度/宽度 的比例
    */
    img {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: All 0.3s ease;
    }
  }
}

// product page
